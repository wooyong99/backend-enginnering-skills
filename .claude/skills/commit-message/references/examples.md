# Commit Message Examples

## Table of Contents

1. [Good vs Bad 비교](#good-vs-bad-비교)
2. [실제 시나리오](#실제-시나리오)
3. [흔한 실수](#흔한-실수)

---

## Good vs Bad 비교

### Example 1: 버그 수정

**Bad** - 변경 사항만 설명:
```
fix: null 체크 추가
```

**Good** - 맥락과 이유 설명:
```
fix(order): 배송 주소가 선택사항일 때 크래시 방지

B2B 주문은 배송 주소 없이 창고 픽업을 허용함.
OrderSummary 컴포넌트가 주소가 항상 존재한다고 가정하여
B2B 주문 조회의 12%에서 TypeError 발생.

픽업 주문을 위한 옵셔널 체이닝과 폴백 표시 추가.

Fixes #892
```

---

### Example 2: 새 기능

**Bad** - 모호하고 도움이 안 됨:
```
feat: 새 버튼 추가
```

**Good** - 명확한 의도와 맥락:
```
feat(dashboard): 분석 데이터 내보내기 버튼 추가

제품팀이 이해관계자 보고를 위해 주간 사용자 참여
메트릭 내보내기가 필요함. 현재는 수동 DB 쿼리 필요.

날짜 범위 선택이 가능한 CSV 내보내기 추가.
타임아웃 방지를 위해 내보내기 10,000행으로 제한.

요청: @product-team in #slack-analytics
```

---

### Example 3: 리팩토링

**Bad** - 이유 설명 없음:
```
refactor: 코드를 새 파일로 이동
```

**Good** - 동기와 이점 설명:
```
refactor(notifications): 전달 채널을 전략 패턴으로 분리

SMS 알림 추가 시 핵심 NotificationService 클래스를
수정해야 해서 개방-폐쇄 원칙 위반.

EmailChannel과 PushChannel을 별도 전략으로 추출.
이제 기존 코드 수정 없이 새 채널 추가 가능.

동작 변경 없음 - 모든 알림 테스트 통과.
```

---

### Example 4: 성능 개선

**Bad** - 영향 정보 누락:
```
perf: 쿼리 최적화
```

**Good** - 메트릭과 이유 포함:
```
perf(reports): 월간 요약을 위한 데이터베이스 쿼리 배치 처리

N+1 쿼리 패턴으로 인해 10,000건 이상 트랜잭션이 있는
계정에서 월간 보고서 생성 타임아웃 발생.

500건 단위로 트랜잭션 일괄 조회.
대형 계정 보고서 생성: 45초 → 3초.

프로덕션 데이터 스냅샷으로 테스트 완료.
```

---

### Example 5: 의존성

**Bad** - 맥락 없음:
```
chore: 패키지 업데이트
```

**Good** - 필요성과 영향 설명:
```
chore(deps): concurrent 기능을 위해 React 17에서 18로 업그레이드

Q2 Suspense 기반 데이터 fetching을 위한 코드베이스 준비.
검색 기능의 useDeferredValue에 React 18 필요.

해결된 breaking changes:
- ReactDOM.render를 createRoot로 교체
- 테스트 유틸리티 act() 사용하도록 업데이트

모든 테스트 통과. 스테이징에서 수동 QA 완료.
```

---

## 실제 시나리오

### 보안 수정

```
fix(auth): 비밀번호 변경 시 세션 무효화

보안 감사에서 비밀번호 변경이 기존 세션을
무효화하지 않아 손상된 세션이 무기한 활성 상태로
유지될 수 있음을 확인.

비밀번호 업데이트 시 세션 무효화 추가.
기존 세션은 "비밀번호 변경됨" 메시지와 함께 종료.

보안 검토: SEC-2024-003
```

### API 변경

```
feat(api): 사용자 목록 엔드포인트에 페이지네이션 추가

GET /users가 모든 사용자를 반환하여
5000명 이상 회원이 있는 조직에서 타임아웃 발생.

설정 가능한 페이지 크기의 커서 기반 페이지네이션 추가.
기본값: 50, 최대: 200.

BREAKING CHANGE: 응답 구조가 배열에서
`data`, `next_cursor`, `has_more` 필드가 있는 객체로 변경.

마이그레이션 가이드: docs/api/v3-migration.md
```

### 핫픽스

```
fix(billing): 플랜 업그레이드 시 비례 배분 계산 수정

사이클 중간에 업그레이드하는 고객에게 비례 배분 대신
전체 월 요금이 청구됨. 3월 1일 배포 이후
약 200명의 고객에게 영향.

남은 일수 / 전체 일수 비율을 사용하도록 계산 수정.
재무팀이 영향받은 계정에 환불 처리 예정.

인시던트: INC-2024-0892
Fixes #1204
```

### 설정 변경

```
chore(config): 피크 트래픽 대비 워커 풀 크기 증가

블랙 프라이데이 준비. 부하 테스트에서 현재 10개 워커가
예상 피크 부하의 70%에서 포화됨.

용량 계획에 따라 25개 워커로 증가.
메모리 할당도 비례하여 증가.

부하 테스트 결과: docs/ops/black-friday-2024-prep.md
```

---

## 흔한 실수

### 1. 제목이 너무 김

**Wrong:**
```
feat(user): 사용자가 시간 제한이 있는 토큰을 사용한 이메일 인증으로 비밀번호를 재설정할 수 있는 기능 추가
```

**Right:**
```
feat(user): 이메일 기반 비밀번호 재설정 추가

안전한 비밀번호 재설정 흐름 구현:
- 시간 제한 토큰 생성 (24시간 만료)
- 이메일로 재설정 링크 전송
- 토큰 검증 및 비밀번호 업데이트

속도 제한 포함: 이메일당 시간당 3회 요청.
```

### 2. 여러 변경 사항 혼합

**Wrong:**
```
fix: 로그인 버그 수정하고 readme 업데이트하고 utils 리팩토링
```

**Right:** 별도 커밋으로 분리:
```
fix(auth): 비밀번호 입력의 특수문자 처리
```
```
docs: README의 인증 섹션 업데이트
```
```
refactor(utils): 문자열 정제 헬퍼 추출
```

### 3. 의미 없는 메시지

**Wrong:**
```
fix: 버그 수정
feat: 기능 추가
chore: 업데이트
wip: 작업 중
```

이런 메시지는 리뷰어나 미래 유지보수자에게 가치가 없음.

### 4. Breaking Changes 맥락 누락

**Wrong:**
```
feat(api): 응답 형식 변경
```

**Right:**
```
feat(api): Unix 타임스탬프 대신 ISO 8601 날짜 반환

프론트엔드 라이브러리가 ISO 형식을 기대함. Unix 타임스탬프는
15개 이상 컴포넌트에서 수동 변환 필요했음.

BREAKING CHANGE: 모든 날짜 필드가 ISO 8601 문자열 반환.
예시: 1710498600 대신 "2024-03-15T10:30:00Z"

영향받는 엔드포인트: /users, /orders, /reports
클라이언트 마이그레이션: parseInt(date)를 new Date(date)로 교체
```

### 5. 명령형 위반

**Wrong:**
```
feat(cart): 수량 선택기를 추가했음
fix(auth): 토큰 갱신을 수정했음
```

**Right:**
```
feat(cart): 수량 선택기 추가
fix(auth): 토큰 갱신 수정
```

생각: "이 커밋은 [수량 선택기 추가]를 할 것이다"
