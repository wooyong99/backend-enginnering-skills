# Commit Types Reference

## Table of Contents

1. [feat](#feat)
2. [fix](#fix)
3. [docs](#docs)
4. [style](#style)
5. [refactor](#refactor)
6. [perf](#perf)
7. [test](#test)
8. [chore](#chore)
9. [ci](#ci)

---

## feat

**목적**: 최종 사용자에게 보이는 새로운 기능

**사용 시점**:
- 새 API 엔드포인트 추가
- 새 UI 컴포넌트 구현
- 새 비즈니스 로직 도입

**본문에 포함할 내용**:
- 이 기능이 해결하는 문제
- 이 접근 방식을 선택한 이유
- 제한 사항이나 향후 고려 사항

```
feat(cart): 회원가입 없이 비회원 결제 활성화

많은 사용자가 필수 회원가입으로 인해 장바구니를 포기함.
분석 결과 가입 단계에서 34% 이탈 확인.

24시간 유지되는 세션 기반 장바구니 구현,
이메일만으로 결제 완료 가능하도록 함.

Relates to #189
```

---

## fix

**목적**: 결함 있는 동작 수정

**사용 시점**:
- 보고된 버그 해결
- 고장난 기능 수정
- 데이터 처리 오류 수정

**본문에 포함할 내용**:
- 버그의 근본 원인
- 이 수정이 어떻게 해결하는지
- 수정 확인 방법

```
fix(payment): 타임아웃 재시도 시 중복 결제 해결

결제 게이트웨이 타임아웃이 자동 재시도를 트리거하는 동안
원래 트랜잭션이 여전히 처리 중이어서
0.3% 트랜잭션에서 중복 결제 발생.

결제 요청에 멱등성 키 추가하고
재시도 전 트랜잭션 상태 확인.

Fixes #456
```

---

## docs

**목적**: 문서 변경만

**사용 시점**:
- README 또는 가이드 업데이트
- 복잡한 로직에 코드 주석 추가
- 문서 오류 수정

**본문에 포함할 내용**:
- 문서 업데이트가 필요했던 이유
- 무엇이 불명확하거나 누락되었는지

```
docs(api): 배치 엔드포인트의 속도 제한 동작 명확화

지원 티켓에서 배치 요청에 속도 제한이 어떻게
적용되는지 혼란이 있음을 확인. 배치의 각 항목이
별도 요청으로 제한에 카운트됨.

배치 호출의 제한 계산을 보여주는 예시 추가.
```

---

## style

**목적**: 로직 영향 없는 포맷팅 변경

**사용 시점**:
- 들여쓰기 또는 공백 수정
- 린터 자동 수정 적용
- import 재정렬

**본문은 보통 선택사항** - 기계적인 변경임.

```
style(components): prettier 포맷팅 적용

pre-commit 훅 활성화 전 모든 React 컴포넌트에
일관된 포맷팅 적용을 위해 prettier 실행.
```

---

## refactor

**목적**: 동작 변경 없는 코드 재구조화

**사용 시점**:
- 코드 구성 개선
- 중복 감소
- 복잡한 로직 단순화

**본문에 포함할 내용**:
- 리팩토링이 필요했던 이유
- 어떤 개선을 가져오는지
- 동작 변경 없음을 확인하는 방법

```
refactor(user-service): 검증 로직을 전용 모듈로 추출

사용자 검증 로직이 5개 컨트롤러에 중복되어
업데이트가 오류를 유발하고 일관성이 없었음.

유닛 테스트가 있는 UserValidator 클래스로 통합.
모든 기존 통합 테스트 변경 없이 통과.
```

---

## perf

**목적**: 성능 개선

**사용 시점**:
- 느린 작업 최적화
- 메모리 사용량 감소
- 응답 시간 개선

**본문에 포함할 내용**:
- 가능한 경우 전후 메트릭
- 어떤 병목이 식별되었는지
- 성능을 위한 트레이드오프

```
perf(search): 자주 필터링되는 컬럼에 인덱스 추가

대용량 데이터셋 검색 쿼리가 3-5초 소요됨.
EXPLAIN에서 status와 created_at의 풀 테이블 스캔 확인.

복합 인덱스 추가로 쿼리 시간 100ms 미만으로 감소.
인덱스로 인해 저장소 오버헤드 약 2% 증가.

벤치마크: queries/search-performance.md
```

---

## test

**목적**: 테스트만 변경

**사용 시점**:
- 새 테스트 케이스 추가
- 불안정한 테스트 수정
- 테스트 커버리지 개선

**본문에 포함할 내용**:
- 이제 어떤 시나리오가 커버되는지
- 테스트가 필요하거나 수정된 이유

```
test(auth): 토큰 갱신 엣지 케이스 커버리지 추가

만료된 리프레시 토큰이나 동시 갱신 시도에 대한
테스트가 없었음. 두 시나리오 모두 지난달
프로덕션 이슈 발생.

만료된 토큰, 동시 갱신, 잘못된 형식 토큰,
폐기된 토큰 시나리오에 대한 테스트 추가.
```

---

## chore

**목적**: 유지보수 작업

**사용 시점**:
- 의존성 업데이트
- 빌드 설정 수정
- 개발 도구 변경

**본문에 포함할 내용**:
- 업데이트가 필요했던 이유
- 의존성의 breaking changes

```
chore(deps): 보안 패치를 위해 axios 1.6.0으로 업그레이드

CVE-2023-45857이 SSRF 취약점으로 axios <1.6.0에 영향.
이 마이너 버전에는 breaking changes 없음.

보안 권고: GHSA-wf5p-g6vw-rhxx
```

---

## ci

**목적**: CI/CD 파이프라인 변경

**사용 시점**:
- GitHub Actions 워크플로우 수정
- 배포 스크립트 업데이트
- 빌드 프로세스 변경

**본문에 포함할 내용**:
- 어떤 파이프라인 동작이 변경되는지
- 변경이 필요했던 이유

```
ci(deploy): 스테이징 환경 검증 단계 추가

프로덕션 배포가 CI에서 잡히지 않는
환경별 이슈로 가끔 실패함.

프로덕션 배포 진행 전 통과해야 하는
스테이징 스모크 테스트 추가.
```
